<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">Chat com IA</h2>
        </div>

        <div class="card-body" style="height: 400px; overflow-y: auto;" id="messages">
          <%= turbo_frame_tag "messages" do %>
            <% if @messages.present? %>
              <%= render partial: "chat_messages/chat_message", collection: @messages %>
            <% else %>
              <p class="text-center text-muted">Nenhuma mensagem ainda. Comece uma conversa!</p>
            <% end %>
          <% end %>
        </div>

        <div class="card-footer" id="message-form">
          <%= form_with(model: ChatMessage.new,
                       url: chat_path,
                       data: { controller: "chat" }) do |f| %>
            <div class="d-flex">
              <%= f.text_field :content,
                  class: "form-control me-2",
                  placeholder: "Digite sua mensagem...",
                  data: { action: "keypress->chat#submitOnEnter" } %>
              <%= f.submit "Enviar", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
